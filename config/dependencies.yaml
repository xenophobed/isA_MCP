# =============================================================================
# Dependencies Configuration - Single Point of Truth for MCP Dependencies
# =============================================================================
# This file is the ONLY source of truth for Python dependencies:
# - deployment/requirements/base.txt (runtime dependencies)
# - deployment/requirements/dev.txt (development dependencies)
#
# Regenerate requirements files with:
#   python -m scripts.generate_requirements
# =============================================================================

# Output Configuration
output:
  base_file: "deployment/requirements/base.txt"
  dev_file: "deployment/requirements/dev.txt"

# =============================================================================
# Base Runtime Dependencies (MCP server in K8s)
# =============================================================================
base:
  # Web Framework
  web_framework:
    - package: "fastapi"
      version: ">=0.104.0"
      description: "FastAPI web framework"
    - package: "uvicorn[standard]"
      version: ">=0.24.0"
      description: "ASGI server"

  # MCP Framework
  mcp_framework:
    - package: "mcp"
      version: ">=1.0.0"
      description: "Model Context Protocol SDK"

  # Data Validation
  data_validation:
    - package: "pydantic"
      version: ">=2.4.0"
      description: "Data validation"

  # HTTP Clients
  http_clients:
    - package: "httpx"
      version: ">=0.25.0"
      description: "Async HTTP client"
    - package: "requests"
      version: ">=2.31.0"
      description: "Sync HTTP client"

  # Database Support
  database:
    - package: "asyncpg"
      version: ">=0.29.0"
      description: "PostgreSQL async driver"
    - package: "SQLAlchemy"
      version: ">=2.0.0"
      description: "SQL toolkit"
    - package: "psycopg2-binary"
      version: ">=2.9.0"
      description: "PostgreSQL driver"
    - package: "duckdb"
      version: ">=1.0.0"
      description: "Embedded analytics database"
    - package: "neo4j"
      version: ">=5.0.0"
      description: "Neo4j graph database driver"

  # Vector Database
  vector_db:
    - package: "pgvector"
      version: ">=0.2.0"
      description: "pgvector extension support"

  # AI and ML
  ai_ml:
    - package: "openai"
      version: ">=1.0.0"
      description: "OpenAI client"
    - package: "tiktoken"
      version: ">=0.5.0"
      description: "Tokenization library"

  # Data Processing
  data_processing:
    - package: "pandas"
      version: ">=1.5.0"
      description: "Data manipulation"
    - package: "openpyxl"
      version: ">=3.1.0"
      description: "Excel file support"
    - package: "xlrd"
      version: ">=2.0.0"
      description: "Excel reading"
    - package: "numpy"
      version: ">=1.24.0"
      description: "Numerical computing"
    - package: "PyMuPDF"
      version: ">=1.23.0"
      description: "PDF processing"
    - package: "PyPDF2"
      version: ">=3.0.0"
      description: "PDF reading"
    - package: "dask[complete]"
      version: ">=2023.12.0"
      description: "Parallel computing"

  # Time Series and ML
  ml_analytics:
    - package: "prophet"
      version: ">=1.1.4"
      description: "Time series forecasting"
    - package: "statsmodels"
      version: ">=0.14.0"
      description: "Statistical modeling"
    - package: "scikit-learn"
      version: ">=1.3.0"
      description: "Machine learning"
    - package: "xgboost"
      version: ">=2.0.0"
      description: "Gradient boosting"
    - package: "lightgbm"
      version: ">=4.1.0"
      description: "Light gradient boosting"

  # Data Visualization
  visualization:
    - package: "matplotlib"
      version: ">=3.8.0"
      description: "Plotting library"
    - package: "seaborn"
      version: ">=0.13.0"
      description: "Statistical visualization"

  # Dimensionality Reduction
  dimensionality:
    - package: "umap-learn"
      version: ">=0.5.0"
      description: "UMAP dimensionality reduction"
    - package: "hdbscan"
      version: ">=0.8.0"
      description: "Hierarchical clustering"

  # Model Serving
  serving:
    - package: "flask"
      version: ">=3.0.0"
      description: "Web framework for model serving"
    - package: "joblib"
      version: ">=1.3.0"
      description: "Model serialization"

  # Web Automation
  automation:
    - package: "playwright"
      version: ">=1.40.0"
      description: "Browser automation"

  # Security and Auth
  security:
    - package: "cryptography"
      version: ">=41.0.0"
      description: "Cryptographic primitives"
    - package: "PyJWT"
      version: ">=2.8.0"
      description: "JWT encoding/decoding"
    - package: "bcrypt"
      version: ">=4.1.0"
      description: "Password hashing"
    - package: "passlib"
      version: ">=1.7.0"
      description: "Password hashing utilities"
    - package: "python-jose[cryptography]"
      version: ">=3.3.0"
      description: "JWT implementation"

  # File Storage
  storage:
    - package: "minio"
      version: ">=7.2.0"
      description: "MinIO S3-compatible client"

  # Cache
  cache:
    - package: "redis"
      version: ">=5.0.0"
      description: "Redis client"
    - package: "hiredis"
      version: ">=2.2.0"
      description: "Redis parser (performance)"

  # Monitoring & Logging
  monitoring:
    - package: "structlog"
      version: ">=23.2.0"
      description: "Structured logging"
    - package: "prometheus-client"
      version: ">=0.19.0"
      description: "Prometheus metrics"
    - package: "sentry-sdk"
      version: ">=1.38.0"
      description: "Error tracking"
    - package: "python-logging-loki"
      version: ">=0.3.1"
      description: "Loki log shipping"

  # Image Processing
  image:
    - package: "Pillow"
      version: ">=10.0.0"
      description: "Image manipulation"
    - package: "opencv-python"
      version: ">=4.8.0"
      description: "Computer vision"

  # Utilities
  utilities:
    - package: "python-dotenv"
      version: ">=1.0.0"
      description: "Environment variable loading"
    - package: "pyyaml"
      version: ">=6.0"
      description: "YAML parsing"
    - package: "click"
      version: ">=8.1.0"
      description: "CLI framework"
    - package: "rich"
      version: ">=13.6.0"
      description: "Rich terminal output"

  # ISA Internal Libraries
  internal:
    - package: "isa-common"
      version: ">=0.1.0"
      description: "isA shared infrastructure library"
    - package: "isa-model"
      version: ">=0.1.0"
      description: "isA AI model client"

# =============================================================================
# Development & Test Dependencies
# =============================================================================
dev:
  # Testing Framework
  testing:
    - package: "pytest"
      version: ">=7.4.0"
      description: "Test framework"
    - package: "pytest-asyncio"
      version: ">=0.21.0"
      description: "Async test support"
    - package: "pytest-cov"
      version: ">=4.1.0"
      description: "Coverage plugin"
    - package: "pytest-xdist"
      version: ">=3.5.0"
      description: "Parallel test execution"
    - package: "pytest-mock"
      version: ">=3.12.0"
      description: "Mock plugin"
    - package: "pytest-timeout"
      version: ">=2.2.0"
      description: "Test timeout support"
    - package: "pytest-benchmark"
      version: ">=4.0.0"
      description: "Performance benchmarking"
    - package: "hypothesis"
      version: ">=6.92.0"
      description: "Property-based testing"

  # Mocking & Fixtures
  fixtures:
    - package: "factory-boy"
      version: ">=3.3.0"
      description: "Test fixtures"
    - package: "faker"
      version: ">=22.0.0"
      description: "Fake data generation"
    - package: "responses"
      version: ">=0.24.0"
      description: "HTTP mocking"
    - package: "respx"
      version: ">=0.20.0"
      description: "Async HTTP mocking"

  # Code Quality
  quality:
    - package: "black"
      version: ">=23.12.0"
      description: "Code formatter"
    - package: "ruff"
      version: ">=0.1.0"
      description: "Fast linter"
    - package: "isort"
      version: ">=5.13.0"
      description: "Import sorter"
    - package: "mypy"
      version: ">=1.8.0"
      description: "Type checker"

  # Type Stubs
  type_stubs:
    - package: "types-requests"
      version: ">=2.31.0"
      description: "Request type stubs"
    - package: "types-pyyaml"
      version: ">=6.0.0"
      description: "YAML type stubs"
    - package: "types-redis"
      version: ">=4.6.0"
      description: "Redis type stubs"

  # Documentation
  documentation:
    - package: "mkdocs"
      version: ">=1.5.0"
      description: "Documentation generator"
    - package: "mkdocs-material"
      version: ">=9.5.0"
      description: "Material theme"
    - package: "mkdocstrings"
      version: ">=0.24.0"
      description: "Auto-documentation"

  # Debugging
  debugging:
    - package: "ipython"
      version: ">=8.19.0"
      description: "Enhanced Python shell"
    - package: "ipdb"
      version: ">=0.13.0"
      description: "IPython debugger"

  # Profiling
  profiling:
    - package: "line-profiler"
      version: ">=4.1.0"
      description: "Line-by-line profiling"
    - package: "memory-profiler"
      version: ">=0.61.0"
      description: "Memory profiling"

# =============================================================================
# File Hierarchy
# =============================================================================
# dev.txt   -> includes base.txt
# base.txt  -> standalone runtime dependencies
# =============================================================================
