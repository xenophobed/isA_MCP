# Medical Domain Configuration
# Generic Knowledge Analytics for Healthcare and Medical Research

domain_name: "medical"
domain_description: "Healthcare knowledge extraction and medical information analysis"
version: "1.0.0"
language: "en"
locale: "en_US"

# Entity Types for Medical Domain
entity_types:
  DISEASE:
    description: "Diseases, conditions, and medical disorders"
    schema:
      name: "Disease or condition name"
      category: "Disease classification (infectious, chronic, etc.)"
      symptoms: "Associated symptoms"
      severity: "Severity level or staging"
      prevalence: "Population prevalence"
      mortality_rate: "Associated mortality statistics"
      risk_factors: "Known risk factors"
      prognosis: "Expected outcome or progression"
    patterns:
      - '\b([A-Z][a-z]+(?:\s+[a-z]+)*)\s+(?:disease|syndrome|disorder|condition)\b'
      - '\b(?:Type\s+[12])\s+([A-Z][a-z]+(?:\s+[a-z]+)*)\b'
    ai_prompts:
      extraction: "Identify diseases, medical conditions, and disorders mentioned in the text."
      
  MEDICATION:
    description: "Drugs, pharmaceuticals, and treatments"
    schema:
      name: "Medication name (generic or brand)"
      drug_class: "Pharmacological class"
      dosage: "Recommended dosage"
      administration: "Route of administration"
      indications: "Medical indications for use"
      contraindications: "When not to use"
      side_effects: "Known adverse effects"
      interactions: "Drug-drug interactions"
    patterns:
      - '\b([A-Z][a-z]+(?:in|ol|ide|ine|ate))\b'  # Common drug suffixes
      - '\b([A-Z][a-z]+)\s+(?:mg|mcg|g|tablets?|capsules?)\b'
    ai_prompts:
      extraction: "Extract medications, drugs, and pharmaceutical treatments."
      
  SYMPTOM:
    description: "Medical symptoms and clinical signs"
    schema:
      name: "Symptom name"
      description: "Detailed symptom description"
      severity: "Severity scale or assessment"
      duration: "Typical duration"
      onset: "Onset pattern (acute, gradual, etc.)"
      location: "Anatomical location if applicable"
    patterns:
      - '\bpatient\s+(?:experiences?|reports?|has)\s+([a-z\s]+)'
      - '\bsymptoms?\s+include\s+([a-z\s,]+)'
    ai_prompts:
      extraction: "Identify symptoms and clinical signs described in medical text."
      
  PROCEDURE:
    description: "Medical procedures, tests, and interventions"
    schema:
      name: "Procedure name"
      type: "Procedure category (diagnostic, therapeutic, surgical)"
      indication: "Medical indication"
      risks: "Associated risks"
      preparation: "Patient preparation required"
      duration: "Typical procedure duration"
      recovery_time: "Expected recovery period"
    patterns:
      - '\b([A-Z][a-z]+(?:\s+[a-z]+)*)\s+(?:surgery|procedure|test|examination)\b'
    ai_prompts:
      extraction: "Find medical procedures, tests, and therapeutic interventions."
      
  ANATOMY:
    description: "Anatomical structures and body parts"
    schema:
      name: "Anatomical structure name"
      system: "Body system (cardiovascular, respiratory, etc.)"
      function: "Primary function"
      location: "Anatomical location"
    patterns:
      - '\b(heart|lung|liver|kidney|brain|stomach|intestine|muscle|bone)\b'
    ai_prompts:
      extraction: "Identify anatomical structures and body parts."

# Relation Types for Medical Domain
relation_types:
  TREATS:
    description: "Treatment relationship between medication and disease"
    predicate: "treats"
    schema:
      efficacy: "Treatment efficacy rate"
      dosage_regimen: "Recommended dosing schedule"
      treatment_duration: "Typical treatment length"
    patterns:
      - '\b(\w+(?:\s+\w+)*)\s+(?:treats|is\s+used\s+for|is\s+effective\s+against)\s+(\w+(?:\s+\w+)*)'
    valid_entity_pairs:
      - ["MEDICATION", "DISEASE"]
      - ["PROCEDURE", "DISEASE"]
    ai_prompts:
      extraction: "Find treatment relationships between medications/procedures and diseases."
      
  CAUSES:
    description: "Causal relationship between factors and diseases"
    predicate: "causes"
    schema:
      mechanism: "Causal mechanism"
      risk_level: "Associated risk level"
    patterns:
      - '\b(\w+(?:\s+\w+)*)\s+(?:causes|leads\s+to|results\s+in)\s+(\w+(?:\s+\w+)*)'
    valid_entity_pairs:
      - ["RISK_FACTOR", "DISEASE"]
      - ["MEDICATION", "SYMPTOM"]
    ai_prompts:
      extraction: "Identify causal relationships between risk factors and diseases."
      
  MANIFESTS_AS:
    description: "Disease manifestation as symptoms"
    predicate: "manifests as"
    schema:
      frequency: "How often this symptom occurs"
      severity: "Typical severity level"
      stage: "Disease stage when symptom appears"
    patterns:
      - '\b(\w+(?:\s+\w+)*)\s+(?:presents\s+with|manifests\s+as|shows)\s+(\w+(?:\s+\w+)*)'
    valid_entity_pairs:
      - ["DISEASE", "SYMPTOM"]
    ai_prompts:
      extraction: "Find how diseases manifest as specific symptoms."
      
  CONTRAINDICATED_WITH:
    description: "Medical contraindication relationship"
    predicate: "contraindicated with"
    schema:
      severity: "Contraindication severity (absolute, relative)"
      reason: "Reason for contraindication"
    patterns:
      - '\b(\w+(?:\s+\w+)*)\s+(?:is\s+)?contraindicated\s+(?:with|in)\s+(\w+(?:\s+\w+)*)'
    valid_entity_pairs:
      - ["MEDICATION", "DISEASE"]
      - ["MEDICATION", "MEDICATION"]
    ai_prompts:
      extraction: "Identify contraindications between medications and conditions."

# Attribute Types for Medical Domain
attribute_types:
  DOSAGE:
    description: "Medication dosage information"
    schema:
      data_type: "string"
      format: "dosage_format"
    validation_rules:
      pattern: '\d+(?:\.\d+)?\s*(?:mg|mcg|g|ml|units?)'
    normalization_rules:
      standardize_units: true
      
  VITAL_SIGN:
    description: "Vital sign measurements"
    schema:
      data_type: "number"
      units: "measurement_unit"
    validation_rules:
      blood_pressure: "80-200/50-120 mmHg"
      heart_rate: "40-200 bpm"
      temperature: "95-108 Â°F"
    normalization_rules:
      convert_to_standard_units: true
      
  SEVERITY_SCALE:
    description: "Medical severity assessments"
    schema:
      data_type: "ordinal"
      scale: "1-10 or mild/moderate/severe"
    validation_rules:
      numeric_range: [1, 10]
      categorical_values: ["mild", "moderate", "severe", "critical"]

# AI Strategy Configurations
ai_strategies:
  default:
    model_type: "llm"
    model_name: "claude-3-sonnet"
    temperature: 0.05  # Very low for medical precision
    max_tokens: 4000
    confidence_threshold: 0.85  # Higher threshold for medical accuracy
    system_prompt: |
      You are a medical information extraction expert with deep knowledge of:
      - Medical terminology and nomenclature
      - Disease classifications and pathophysiology
      - Pharmacology and drug interactions
      - Clinical procedures and diagnostic methods
      - Anatomical structures and physiological systems
      
      Extract medical information with extreme precision and clinical accuracy.
      Always provide confidence scores and flag uncertain extractions.
    domain_context: |
      Medical knowledge extraction from clinical documents, research papers,
      and healthcare records. Prioritize clinical accuracy and safety.
      
  clinical_notes:
    model_type: "llm"
    model_name: "claude-3-sonnet"
    temperature: 0.0  # Maximum precision for clinical data
    max_tokens: 3000
    confidence_threshold: 0.9
    system_prompt: |
      You are analyzing clinical notes and medical records. Extract only
      explicitly stated medical information. Do not infer or extrapolate.
    domain_context: "Clinical documentation and patient records analysis."

# Extraction Configuration
extraction_config:
  primary_methods: ["llm"]  # Prioritize LLM for medical accuracy
  enable_fallback: false  # Disable fallback for medical safety
  confidence_routing:
    llm: 0.85
  max_text_length: 20000  # Smaller chunks for medical documents
  chunk_size: 2000
  enable_validation: true  # Essential for medical data
  enable_deduplication: true

# Medical-specific Prompts
prompts:
  entity_extraction: |
    Extract medical entities from this clinical text. Identify:
    1. Diseases, conditions, and disorders
    2. Medications and treatments
    3. Symptoms and clinical signs
    4. Medical procedures and tests
    5. Anatomical structures
    
    Maintain clinical accuracy and use standard medical terminology.
    
    Text: {text}
    
  relation_extraction: |
    Find medical relationships in the text:
    1. Treatment relationships (medication treats disease)
    2. Causal relationships (risk factor causes disease)
    3. Manifestation relationships (disease manifests as symptom)
    4. Contraindication relationships
    
    Entities: {entities}
    Text: {text}

# Custom Medical Rules
custom_rules:
  medication_validation:
    - "Drug names must match standard pharmaceutical nomenclature"
    - "Dosages must include appropriate units"
    - "Flag unusual or potentially dangerous dosages"
    
  disease_classification:
    - "Use ICD-10 compatible disease coding when possible"
    - "Validate against known disease taxonomies"
    
  safety_checks:
    - "Flag potential drug interactions"
    - "Highlight contraindicated combinations"
    - "Review dosages exceeding normal ranges"