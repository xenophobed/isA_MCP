INFO:resources.database_init:Starting database initialization...
INFO:resources.database_init:Database tables created successfully
INFO:resources.database_init:Sample data loaded: 5 memory entries
INFO:resources.database_init:Database initialization completed successfully
INFO:core.auto_discovery:🚀 Auto-registering all discovered items with MCP server
INFO:core.auto_discovery:  ✅ Registered tools from autonomous_tools
INFO:core.auto_discovery:  ✅ Registered tools from weather_tools
INFO:core.auto_discovery:  ✅ Registered tools from web_tools
ERROR:core.auto_discovery:  ❌ Failed to register tools from twillo_tools.py: unmatched '}' (twillo_tools.py, line 169)
INFO:core.auto_discovery:  ✅ Registered tools from admin_tools
INFO:core.auto_discovery:  ✅ Registered tools from memory_tools
WARNING:core.auto_discovery:  ⚠️ shopify_tools has tools but no register function
INFO:event_sourcing_tools:Event sourcing tools registered successfully
INFO:core.auto_discovery:  ✅ Registered tools from event_sourcing_tools
INFO:image_gen_tools:Image generation tools registered successfully
INFO:core.auto_discovery:  ✅ Registered tools from image_gen_tools
INFO:core.auto_discovery:🔍 Discovering tools in /Users/xenodennis/Documents/Fun/isA_MCP/tools
INFO:core.auto_discovery:🔍 Using AST discovery for top-level tools...
INFO:core.auto_discovery:  📄 Scanning autonomous_tools.py
INFO:core.auto_discovery:    🔧 Found tool: plan_autonomous_task
INFO:core.auto_discovery:    🔧 Found tool: get_autonomous_status
INFO:core.auto_discovery:  📄 Scanning weather_tools.py
INFO:core.auto_discovery:  📄 Scanning web_tools.py
INFO:core.auto_discovery:  📄 Scanning search_tools.py
INFO:core.auto_discovery:  📄 Scanning twillo_tools.py
ERROR:core.auto_discovery:Error parsing /Users/xenodennis/Documents/Fun/isA_MCP/tools/twillo_tools.py: unmatched '}' (<unknown>, line 169)
INFO:core.auto_discovery:  📄 Scanning admin_tools.py
INFO:core.auto_discovery:  📄 Scanning memory_tools.py
INFO:core.auto_discovery:  📄 Scanning shopify_tools.py
INFO:core.auto_discovery:  📄 Scanning event_sourcing_tools.py
INFO:core.auto_discovery:  📄 Scanning client_interaction_tools.py
INFO:core.auto_discovery:  📄 Scanning image_gen_tools.py
INFO:core.auto_discovery:  📄 Scanning tool_selector.py
INFO:core.auto_discovery:  📄 Scanning smart_tools.py
INFO:core.auto_discovery:  📄 Scanning rag_client.py
INFO:core.auto_discovery:  📄 Scanning event_sourcing_services.py
INFO:core.auto_discovery:  📄 Scanning shopify_client.py
INFO:core.auto_discovery:  📄 Scanning vision_analyzer.py
INFO:core.auto_discovery:  📄 Scanning session_manager.py
INFO:core.auto_discovery:  📄 Scanning stealth_manager.py
INFO:core.auto_discovery:  📄 Scanning browser_manager.py
INFO:core.auto_discovery:  📄 Scanning proxy_manager.py
INFO:core.auto_discovery:  📄 Scanning rate_limiter.py
INFO:core.auto_discovery:  📄 Scanning human_behavior.py
INFO:core.auto_discovery:🔍 Using register function discovery for nested tools...
INFO:core.auto_discovery:🔍 Discovering tools from registered modules
INFO:core.auto_discovery:  📄 Extracting tools from autonomous_tools
INFO:core.auto_discovery:  📄 Extracting tools from weather_tools
INFO:core.auto_discovery:    🔧 Found tool: get_weather
INFO:core.auto_discovery:      Description: Get weather information with caching and monitoring  This to...
INFO:core.auto_discovery:      Keywords: ['weather', 'information', 'caching', 'monitoring', 'tool']
INFO:core.auto_discovery:  📄 Extracting tools from web_tools
INFO:core.auto_discovery:    🔧 Found tool: get_web_tools_status
INFO:core.auto_discovery:      Description: Get web tools status and statistics  This tool provides admi...
INFO:core.auto_discovery:      Keywords: ['tools', 'status', 'statistics', 'tool', 'provides']
ERROR:core.auto_discovery:Error processing twillo_tools.py: unmatched '}' (twillo_tools.py, line 169)
INFO:core.auto_discovery:  📄 Extracting tools from admin_tools
INFO:core.auto_discovery:    🔧 Found tool: get_authorization_requests
INFO:core.auto_discovery:    🔧 Found tool: approve_authorization
INFO:core.auto_discovery:      Description: Get system monitoring metrics  This tool provides access to ...
INFO:core.auto_discovery:      Keywords: ['system', 'monitoring', 'metrics', 'tool', 'provides']
INFO:core.auto_discovery:    🔧 Found tool: get_monitoring_metrics
INFO:core.auto_discovery:      Description: Get audit log entries  This tool provides access to system a...
INFO:core.auto_discovery:      Keywords: ['audit', 'entries', 'tool', 'provides', 'access']
INFO:core.auto_discovery:    🔧 Found tool: get_audit_log
INFO:core.auto_discovery:      Description: Get audit log entries  This tool provides access to system a...
INFO:core.auto_discovery:      Keywords: ['audit', 'entries', 'tool', 'provides', 'access']
INFO:core.auto_discovery:  📄 Extracting tools from memory_tools
INFO:core.auto_discovery:    🔧 Found tool: remember
INFO:core.auto_discovery:      Description: Store information in long-term memory with authorization  Th...
INFO:core.auto_discovery:      Keywords: ['store', 'information', 'long-term', 'memory', 'authorization']
INFO:core.auto_discovery:    🔧 Found tool: forget
INFO:core.auto_discovery:      Description: Remove information from memory with high security authorizat...
INFO:core.auto_discovery:      Keywords: ['remove', 'information', 'memory', 'high', 'security']
INFO:core.auto_discovery:    🔧 Found tool: update_memory
INFO:core.auto_discovery:      Description: Update existing memory entry with new value/metadata  This t...
INFO:core.auto_discovery:      Keywords: ['update', 'existing', 'memory', 'entry', 'value/metadata']
INFO:core.auto_discovery:    🔧 Found tool: search_memories
INFO:core.auto_discovery:  📄 Extracting tools from event_sourcing_tools
INFO:core.auto_discovery:    🔧 Found tool: list_background_tasks
INFO:core.auto_discovery:      Description: List all background tasks for the user  This tool provides a...
INFO:core.auto_discovery:      Keywords: ['list', 'background', 'tasks', 'user', 'tool']
INFO:core.auto_discovery:    🔧 Found tool: pause_background_task
INFO:core.auto_discovery:      Description: Pause a background task  This tool allows users to temporari...
INFO:core.auto_discovery:      Keywords: ['pause', 'background', 'task', 'tool', 'allows']
INFO:core.auto_discovery:    🔧 Found tool: resume_background_task
INFO:core.auto_discovery:      Description: Resume a paused background task  This tool resumes execution...
INFO:core.auto_discovery:      Keywords: ['resume', 'paused', 'background', 'task', 'tool']
INFO:core.auto_discovery:    🔧 Found tool: delete_background_task
INFO:core.auto_discovery:      Description: Delete a background task  This tool permanently removes a ba...
INFO:core.auto_discovery:      Keywords: ['delete', 'background', 'task', 'tool', 'permanently']
INFO:core.auto_discovery:    🔧 Found tool: get_event_sourcing_status
INFO:core.auto_discovery:      Description: Get the status of the event sourcing service  This tool prov...
INFO:core.auto_discovery:      Keywords: ['status', 'event', 'sourcing', 'service', 'tool']
INFO:image_gen_tools:Image generation tools registered successfully
INFO:core.auto_discovery:  📄 Extracting tools from image_gen_tools
INFO:core.auto_discovery:✅ Discovered 15 tools from registered modules
INFO:core.auto_discovery:✅ Discovered 17 tools total
INFO:core.auto_discovery:    AST discovery: 2 tools
INFO:core.auto_discovery:    Register function discovery: 15 tools
INFO:core.auto_discovery:🔍 Discovering prompts in /Users/xenodennis/Documents/Fun/isA_MCP/prompts
INFO:core.auto_discovery:  📄 Scanning prompt_selector.py
INFO:core.auto_discovery:  📄 Scanning system_prompts.py
INFO:core.auto_discovery:  📄 Scanning shopify_prompts.py
INFO:core.auto_discovery:  📄 Scanning autonomous_prompts.py
INFO:core.auto_discovery:✅ Discovered 0 prompts
INFO:core.auto_discovery:🔍 Discovering resources in /Users/xenodennis/Documents/Fun/isA_MCP/resources
INFO:core.auto_discovery:  📄 Scanning database_init.py
INFO:core.auto_discovery:    📊 Found resource: datetime
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: init_database
INFO:core.auto_discovery:    📊 Found resource: initialize_database
INFO:core.auto_discovery:    📊 Found resource: load_sample_data
INFO:core.auto_discovery:  📄 Scanning graph_rag_resources.py
ERROR:core.auto_discovery:Error processing resources file /Users/xenodennis/Documents/Fun/isA_MCP/resources/graph_rag_resources.py: No module named 'spacy'
INFO:core.auto_discovery:  📄 Scanning guardrail_resources.py
INFO:core.auto_discovery:    📊 Found resource: Any
INFO:core.auto_discovery:    📊 Found resource: Dict
INFO:core.auto_discovery:    📊 Found resource: FastMCP
INFO:core.auto_discovery:    📊 Found resource: GuardrailChecker
INFO:core.auto_discovery:    📊 Found resource: GuardrailConfig
INFO:core.auto_discovery:    📊 Found resource: List
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: register_guardrail_resources
INFO:core.auto_discovery:  📄 Scanning monitoring_resources.py
INFO:core.auto_discovery:    📊 Found resource: datetime
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: register_monitoring_resources
INFO:core.auto_discovery:  📄 Scanning shopify_resources.py
ERROR:core.auto_discovery:Error processing resources file /Users/xenodennis/Documents/Fun/isA_MCP/resources/shopify_resources.py: No module named 'tools.services.ai_shopping_assistant'
INFO:core.auto_discovery:  📄 Scanning symbolic_model_resources.py
INFO:core.auto_discovery:    📊 Found resource: Any
INFO:core.auto_discovery:    📊 Found resource: Dict
INFO:core.auto_discovery:    📊 Found resource: FastMCP
INFO:core.auto_discovery:    📊 Found resource: List
INFO:core.auto_discovery:    📊 Found resource: Set
INFO:core.auto_discovery:    📊 Found resource: SymbolicModel
INFO:core.auto_discovery:    📊 Found resource: SymbolicReasoner
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: register_symbolic_model_resources
INFO:core.auto_discovery:  📄 Scanning memory_resources.py
INFO:core.auto_discovery:    📊 Found resource: datetime
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: register_memory_resources
INFO:core.auto_discovery:  📄 Scanning event_sourcing_resources.py
INFO:core.auto_discovery:    📊 Found resource: Any
INFO:core.auto_discovery:    📊 Found resource: Dict
INFO:core.auto_discovery:    📊 Found resource: datetime
INFO:core.auto_discovery:    📊 Found resource: get_event_sourcing_service
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: register_event_sourcing_resources
INFO:core.auto_discovery:  📄 Scanning rag_resources.py
ERROR:core.auto_discovery:Error processing resources file /Users/xenodennis/Documents/Fun/isA_MCP/resources/rag_resources.py: No module named 'weaviate'
INFO:core.auto_discovery:  📄 Scanning resource_selector.py
INFO:core.auto_discovery:    📊 Found resource: AIFactory
INFO:core.auto_discovery:    📊 Found resource: Dict
INFO:core.auto_discovery:    📊 Found resource: List
INFO:core.auto_discovery:    📊 Found resource: Optional
INFO:core.auto_discovery:    📊 Found resource: ResourceSelector
INFO:core.auto_discovery:    📊 Found resource: datetime
INFO:core.auto_discovery:    📊 Found resource: get_logger
INFO:core.auto_discovery:    📊 Found resource: get_resource_selector
INFO:core.auto_discovery:✅ Discovered 24 resources
INFO:core.auto_discovery:🎉 Auto-registration complete: 7 tool modules registered
INFO:core.auto_discovery:📁 Tool files processed: ['autonomous_tools.py', 'weather_tools.py', 'admin_tools.py', 'image_gen_tools.py', 'memory_tools.py', 'event_sourcing_tools.py', 'web_tools.py']
INFO:core.auto_discovery:📊 Discovery summary:
INFO:core.auto_discovery:  🔧 Tools discovered: 17
INFO:core.auto_discovery:  📝 Prompts: 0
INFO:core.auto_discovery:  📊 Resources: 24
INFO:tools.core.tool_selector:Loading tool information dynamically...
INFO:tools.image_gen_tools:Image generation tools registered successfully
INFO:tools.services.shopify_client:Shopify Client initialized for domain: jfwu61-6z.myshopify.com
INFO:tools.shopify_tools:Shopify client initialized successfully
INFO:tools.shopify_tools:Realistic Shopify tools registered successfully
INFO:tools.client_interaction_tools:Client interaction tools registered successfully
INFO:tools.event_sourcing_tools:Event sourcing tools registered successfully
INFO:tools.core.tool_selector:Loaded 40 tools: ['get_weather', 'remember', 'forget', 'update_memory', 'search_memories', 'generate_image', 'generate_image_to_file', 'image_to_image', 'search_image_generations', 'search_products', 'get_product_details', 'add_to_cart', 'view_cart', 'get_user_info', 'save_shipping_address', 'start_checkout', 'process_payment', 'get_authorization_requests', 'approve_authorization', 'get_monitoring_metrics', 'get_audit_log', 'ask_human', 'request_authorization', 'check_security_status', 'format_response', 'create_background_task', 'list_background_tasks', 'pause_background_task', 'resume_background_task', 'delete_background_task', 'get_event_sourcing_status', 'automate_web_login', 'automate_web_search', 'automate_file_download', 'intelligent_web_search', 'intelligent_web_crawl', 'monitor_website_changes', 'get_web_tools_status', 'plan_autonomous_task', 'get_autonomous_status']
INFO:tools.core.tool_selector:  get_weather: Get weather information with caching and monitorin...
INFO:tools.core.tool_selector:    Keywords: ['weather', 'temperature', 'forecast', 'climate']
INFO:tools.core.tool_selector:    Category: weather
INFO:tools.core.tool_selector:  remember: Store information in long-term memory with authori...
INFO:tools.core.tool_selector:    Keywords: ['memory', 'remember', 'store', 'recall']
INFO:tools.core.tool_selector:    Category: memory
INFO:tools.core.tool_selector:  forget: Remove information from memory with high security ...
INFO:tools.core.tool_selector:    Keywords: ['forget']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  update_memory: Update existing memory entry with new value/metada...
INFO:tools.core.tool_selector:    Keywords: ['memory', 'remember', 'store', 'recall']
INFO:tools.core.tool_selector:    Category: memory
INFO:tools.core.tool_selector:  search_memories: Search through memories with security checks
     ...
INFO:tools.core.tool_selector:    Keywords: ['search_memories']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  generate_image: Generate image from text prompt using isa_model
  ...
INFO:tools.core.tool_selector:    Keywords: ['image', 'generate', 'picture', 'visual', 'art']
INFO:tools.core.tool_selector:    Category: image
INFO:tools.core.tool_selector:  generate_image_to_file: Generate image and save directly to file
        
...
INFO:tools.core.tool_selector:    Keywords: ['image', 'generate', 'picture', 'visual', 'art']
INFO:tools.core.tool_selector:    Category: image
INFO:tools.core.tool_selector:  image_to_image: Transform existing image using I2I model
        
...
INFO:tools.core.tool_selector:    Keywords: ['image', 'generate', 'picture', 'visual', 'art']
INFO:tools.core.tool_selector:    Category: image
INFO:tools.core.tool_selector:  search_image_generations: Search through image generation history
        
 ...
INFO:tools.core.tool_selector:    Keywords: ['image', 'generate', 'picture', 'visual', 'art']
INFO:tools.core.tool_selector:    Category: image
INFO:tools.core.tool_selector:  search_products: 
        Search for products in Shopify store
    ...
INFO:tools.core.tool_selector:    Keywords: ['shopify', 'store', 'product', 'order', 'ecommerce']
INFO:tools.core.tool_selector:    Category: shopify
INFO:tools.core.tool_selector:  get_product_details: 
        Get detailed product information
        ...
INFO:tools.core.tool_selector:    Keywords: ['shopify', 'store', 'product', 'order', 'ecommerce']
INFO:tools.core.tool_selector:    Category: shopify
INFO:tools.core.tool_selector:  add_to_cart: 
        Add product to shopping cart
        
   ...
INFO:tools.core.tool_selector:    Keywords: ['add_to_cart']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  view_cart: 
        View shopping cart contents
        
    ...
INFO:tools.core.tool_selector:    Keywords: ['view_cart']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_user_info: 
        Get user information (address, payment me...
INFO:tools.core.tool_selector:    Keywords: ['get_user_info']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  save_shipping_address: 
        Save user shipping address
        
     ...
INFO:tools.core.tool_selector:    Keywords: ['save_shipping_address']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  start_checkout: 
        Start checkout process
        
        T...
INFO:tools.core.tool_selector:    Keywords: ['start_checkout']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  process_payment: 
        Process payment (test environment)
      ...
INFO:tools.core.tool_selector:    Keywords: ['process_payment']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_authorization_requests: Get pending authorization requests (admin only)
  ...
INFO:tools.core.tool_selector:    Keywords: ['get_authorization_requests']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  approve_authorization: Approve an authorization request
        
        ...
INFO:tools.core.tool_selector:    Keywords: ['approve_authorization']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_monitoring_metrics: Get system monitoring metrics
        
        Thi...
INFO:tools.core.tool_selector:    Keywords: ['get_monitoring_metrics']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_audit_log: Get audit log entries
        
        This tool p...
INFO:tools.core.tool_selector:    Keywords: ['get_audit_log']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  ask_human: Ask the human for additional information or clarif...
INFO:tools.core.tool_selector:    Keywords: ['ask_human']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  request_authorization: Request human authorization before executing a too...
INFO:tools.core.tool_selector:    Keywords: ['request_authorization']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  check_security_status: Check the security and monitoring status of the sy...
INFO:tools.core.tool_selector:    Keywords: ['check_security_status']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  format_response: Format responses with enhanced structure and guard...
INFO:tools.core.tool_selector:    Keywords: ['format_response']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  create_background_task: Create a background monitoring task that runs inde...
INFO:tools.core.tool_selector:    Keywords: ['create_background_task']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  list_background_tasks: List all background tasks for the user
        
  ...
INFO:tools.core.tool_selector:    Keywords: ['list_background_tasks']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  pause_background_task: Pause a background task
        
        This tool...
INFO:tools.core.tool_selector:    Keywords: ['pause_background_task']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  resume_background_task: Resume a paused background task
        
        T...
INFO:tools.core.tool_selector:    Keywords: ['resume_background_task']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  delete_background_task: Delete a background task
        
        This too...
INFO:tools.core.tool_selector:    Keywords: ['delete_background_task']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_event_sourcing_status: Get the status of the event sourcing service
     ...
INFO:tools.core.tool_selector:    Keywords: ['event', 'sourcing', 'history', 'log']
INFO:tools.core.tool_selector:    Category: event
INFO:tools.core.tool_selector:  automate_web_login: Automate login process using vision-guided automat...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  automate_web_search: Automate web search using vision-guided element de...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  automate_file_download: Automate file downloads from websites
        
   ...
INFO:tools.core.tool_selector:    Keywords: ['automate_file_download']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  intelligent_web_search: Perform intelligent web searches across multiple s...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  intelligent_web_crawl: Perform intelligent web crawling with vision-guide...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  monitor_website_changes: Monitor website for changes using vision-based det...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  get_web_tools_status: Get web tools status and statistics
        
     ...
INFO:tools.core.tool_selector:    Keywords: ['web', 'browser', 'automation', 'scrape']
INFO:tools.core.tool_selector:    Category: web
INFO:tools.core.tool_selector:  plan_autonomous_task: 
        Create a comprehensive autonomous executi...
INFO:tools.core.tool_selector:    Keywords: ['plan_autonomous_task']
INFO:tools.core.tool_selector:    Category: general
INFO:tools.core.tool_selector:  get_autonomous_status: 
        Get status of autonomous execution plan
 ...
INFO:tools.core.tool_selector:    Keywords: ['get_autonomous_status']
INFO:tools.core.tool_selector:    Category: general
INFO:isa_model.inference.ai_factory:Ollama services registered successfully
INFO:isa_model.inference.ai_factory:OpenAI services registered successfully
INFO:isa_model.inference.ai_factory:Replicate services registered successfully
INFO:isa_model.inference.ai_factory:AI Factory initialized with centralized provider API key management
INFO:isa_model.inference.providers.openai_provider:Initialized OpenAIProvider with URL: https://api.openai.com/v1
INFO:isa_model.inference.services.embedding.openai_embed_service:Initialized OpenAIEmbedService with model 'text-embedding-3-small'
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Loaded 487 billing records
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000003
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000002
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000002
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000003
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000003
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000003
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000002
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000001
INFO:tools.core.tool_selector:Computed embeddings for 40 tools
INFO:tools.core.tool_selector:Tool selector initialized
INFO:prompts.prompt_selector:Loading prompt information dynamically...
INFO:prompts.prompt_selector:Loaded 10 prompts: ['security_analysis_prompt', 'memory_organization_prompt', 'monitoring_report_prompt', 'user_assistance_prompt', 'personal_stylist_prompt', 'product_comparison_prompt', 'outfit_coordination_prompt', 'shopping_assistant_prompt', 'trend_analysis_prompt', 'size_fit_consultant_prompt']
INFO:prompts.prompt_selector:  security_analysis_prompt: Generate a security analysis prompt for evaluating...
INFO:prompts.prompt_selector:    Keywords: ['security', 'analysis', 'risk', 'evaluation', 'authorization', 'audit']
INFO:prompts.prompt_selector:    Category: security
INFO:prompts.prompt_selector:  memory_organization_prompt: Generate a prompt for organizing and categorizing ...
INFO:prompts.prompt_selector:    Keywords: ['memory', 'organization', 'categorization', 'knowledge', 'structure']
INFO:prompts.prompt_selector:    Category: memory
INFO:prompts.prompt_selector:  monitoring_report_prompt: Generate a monitoring and performance analysis pro...
INFO:prompts.prompt_selector:    Keywords: ['monitoring', 'performance', 'metrics', 'analysis', 'system', 'health']
INFO:prompts.prompt_selector:    Category: monitoring
INFO:prompts.prompt_selector:  user_assistance_prompt: Generate a user assistance prompt for helping with...
INFO:prompts.prompt_selector:    Keywords: ['assistance', 'help', 'support', 'query', 'user', 'general']
INFO:prompts.prompt_selector:    Category: assistance
INFO:prompts.prompt_selector:  personal_stylist_prompt: Generate a personal stylist consultation prompt fo...
INFO:prompts.prompt_selector:    Keywords: ['stylist', 'fashion', 'style', 'consultation', 'clothing', 'outfit']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:  product_comparison_prompt: Generate a detailed product comparison analysis pr...
INFO:prompts.prompt_selector:    Keywords: ['product', 'comparison', 'analysis', 'evaluation', 'review', 'decision']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:  outfit_coordination_prompt: Generate outfit coordination and styling suggestio...
INFO:prompts.prompt_selector:    Keywords: ['outfit', 'coordination', 'styling', 'fashion', 'clothing', 'ensemble']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:  shopping_assistant_prompt: Generate a comprehensive shopping assistant intera...
INFO:prompts.prompt_selector:    Keywords: ['shopping', 'assistant', 'purchase', 'recommendation', 'retail', 'customer']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:  trend_analysis_prompt: Generate fashion trend analysis and forecasting pr...
INFO:prompts.prompt_selector:    Keywords: ['trend', 'analysis', 'fashion', 'forecasting', 'market', 'style']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:  size_fit_consultant_prompt: Generate size and fit consultation guidance prompt...
INFO:prompts.prompt_selector:    Keywords: ['size', 'fit', 'consultation', 'measurements', 'sizing', 'garment']
INFO:prompts.prompt_selector:    Category: shopping
INFO:prompts.prompt_selector:Loaded cached prompt embeddings
INFO:prompts.prompt_selector:Prompt selector initialized
INFO:resources.resource_selector:Loading resource information dynamically...
INFO:resources.resource_selector:Loaded 17 resources: ['memory://all', 'memory://category/{category}', 'weather://cache', 'event://tasks', 'event://status', 'event://tasks/active', 'event://tasks/by-type/{task_type}', 'event://config/examples', 'monitoring://metrics', 'monitoring://health', 'monitoring://audit', 'shopify://catalog/collections', 'shopify://knowledge/fashion_guide', 'shopify://preferences/user_profiles', 'shopify://analytics/shopping_trends', 'shopify://cache/product_recommendations', 'shopify://inventory/stock_alerts']
INFO:resources.resource_selector:  memory://all: Get all memories with monitoring and categorizatio...
INFO:resources.resource_selector:    Keywords: ['memory', 'all', 'complete', 'list', 'memories', 'storage']
INFO:resources.resource_selector:    Category: memory
INFO:resources.resource_selector:  memory://category/{category}: Get memories filtered by specific category...
INFO:resources.resource_selector:    Keywords: ['memory', 'category', 'filtered', 'organized', 'specific']
INFO:resources.resource_selector:    Category: memory
INFO:resources.resource_selector:  weather://cache: Get cached weather data for various locations...
INFO:resources.resource_selector:    Keywords: ['weather', 'cache', 'forecast', 'temperature', 'location']
INFO:resources.resource_selector:    Category: weather
INFO:resources.resource_selector:  event://tasks: Get all tasks from event sourcing system...
INFO:resources.resource_selector:    Keywords: ['event', 'tasks', 'all', 'sourcing', 'workflow']
INFO:resources.resource_selector:    Category: event
INFO:resources.resource_selector:  event://status: Get service status and health information...
INFO:resources.resource_selector:    Keywords: ['event', 'status', 'health', 'service', 'monitoring']
INFO:resources.resource_selector:    Category: event
INFO:resources.resource_selector:  event://tasks/active: Get currently active tasks from event system...
INFO:resources.resource_selector:    Keywords: ['event', 'tasks', 'active', 'current', 'running']
INFO:resources.resource_selector:    Category: event
INFO:resources.resource_selector:  event://tasks/by-type/{task_type}: Get tasks filtered by specific type...
INFO:resources.resource_selector:    Keywords: ['event', 'tasks', 'type', 'filtered', 'category']
INFO:resources.resource_selector:    Category: event
INFO:resources.resource_selector:  event://config/examples: Get configuration examples for event system...
INFO:resources.resource_selector:    Keywords: ['event', 'config', 'examples', 'configuration', 'setup']
INFO:resources.resource_selector:    Category: event
INFO:resources.resource_selector:  monitoring://metrics: Get system monitoring metrics and performance data...
INFO:resources.resource_selector:    Keywords: ['monitoring', 'metrics', 'performance', 'system', 'data']
INFO:resources.resource_selector:    Category: monitoring
INFO:resources.resource_selector:  monitoring://health: Get system health status and diagnostics...
INFO:resources.resource_selector:    Keywords: ['monitoring', 'health', 'status', 'diagnostics', 'system']
INFO:resources.resource_selector:    Category: monitoring
INFO:resources.resource_selector:  monitoring://audit: Get audit logs and security monitoring data...
INFO:resources.resource_selector:    Keywords: ['monitoring', 'audit', 'logs', 'security', 'history']
INFO:resources.resource_selector:    Category: monitoring
INFO:resources.resource_selector:  shopify://catalog/collections: Get product catalog collections and categories...
INFO:resources.resource_selector:    Keywords: ['shopify', 'catalog', 'collections', 'products', 'store']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:  shopify://knowledge/fashion_guide: Get fashion knowledge base and style guide...
INFO:resources.resource_selector:    Keywords: ['shopify', 'fashion', 'knowledge', 'style', 'guide']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:  shopify://preferences/user_profiles: Get user shopping profiles and preferences...
INFO:resources.resource_selector:    Keywords: ['shopify', 'user', 'profiles', 'preferences', 'shopping']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:  shopify://analytics/shopping_trends: Get shopping trends and analytics data...
INFO:resources.resource_selector:    Keywords: ['shopify', 'analytics', 'trends', 'shopping', 'data']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:  shopify://cache/product_recommendations: Get cached product recommendations for users...
INFO:resources.resource_selector:    Keywords: ['shopify', 'recommendations', 'products', 'cache', 'suggestions']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:  shopify://inventory/stock_alerts: Get stock level alerts and inventory information...
INFO:resources.resource_selector:    Keywords: ['shopify', 'inventory', 'stock', 'alerts', 'availability']
INFO:resources.resource_selector:    Category: shopify
INFO:resources.resource_selector:Loaded cached resource embeddings
INFO:resources.resource_selector:Resource selector initialized
INFO:     Started server process [31472]
INFO:     Waiting for application startup.
INFO:mcp.server.streamable_http_manager:StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:4321 (Press CTRL+C to quit)
INFO:tools.core.tool_selector:Tool selector: analyzing request 'Login to https://the-internet.herokuapp.com/login using username tomsmith password SuperSecretPassword\!'
INFO:tools.core.tool_selector:Embed service ready: True
INFO:tools.core.tool_selector:Embeddings cache ready: True
INFO:tools.core.tool_selector:Max tools: 5, Threshold: 0.25
INFO:tools.core.tool_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:tools.core.tool_selector:User embedding computed, length: 1536
INFO:tools.core.tool_selector:Computing similarities with 40 tools...
INFO:tools.core.tool_selector:  get_weather: 0.1399
INFO:tools.core.tool_selector:  remember: 0.2032
INFO:tools.core.tool_selector:  forget: 0.2457
INFO:tools.core.tool_selector:  update_memory: 0.0882
INFO:tools.core.tool_selector:  search_memories: 0.2008
INFO:tools.core.tool_selector:  generate_image: 0.1457
INFO:tools.core.tool_selector:  generate_image_to_file: 0.1346
INFO:tools.core.tool_selector:  image_to_image: 0.1423
INFO:tools.core.tool_selector:  search_image_generations: 0.1290
INFO:tools.core.tool_selector:  search_products: 0.0819
INFO:tools.core.tool_selector:  get_product_details: 0.0964
INFO:tools.core.tool_selector:  add_to_cart: 0.0742
INFO:tools.core.tool_selector:  view_cart: 0.1281
INFO:tools.core.tool_selector:  get_user_info: 0.1506
INFO:tools.core.tool_selector:  save_shipping_address: 0.1371
INFO:tools.core.tool_selector:  start_checkout: 0.1548
INFO:tools.core.tool_selector:  process_payment: 0.1292
INFO:tools.core.tool_selector:  get_authorization_requests: 0.1805
INFO:tools.core.tool_selector:  approve_authorization: 0.1929
INFO:tools.core.tool_selector:  get_monitoring_metrics: 0.1615
INFO:tools.core.tool_selector:  get_audit_log: 0.1633
INFO:tools.core.tool_selector:  ask_human: 0.1594
INFO:tools.core.tool_selector:  request_authorization: 0.2286
INFO:tools.core.tool_selector:  check_security_status: 0.2455
INFO:tools.core.tool_selector:  format_response: 0.1759
INFO:tools.core.tool_selector:  create_background_task: 0.1078
INFO:tools.core.tool_selector:  list_background_tasks: 0.0912
INFO:tools.core.tool_selector:  pause_background_task: 0.1017
INFO:tools.core.tool_selector:  resume_background_task: 0.0581
INFO:tools.core.tool_selector:  delete_background_task: 0.1181
INFO:tools.core.tool_selector:  get_event_sourcing_status: 0.1340
INFO:tools.core.tool_selector:  automate_web_login: 0.3366
INFO:tools.core.tool_selector:  automate_web_search: 0.2062
INFO:tools.core.tool_selector:  automate_file_download: 0.1607
INFO:tools.core.tool_selector:  intelligent_web_search: 0.1971
INFO:tools.core.tool_selector:  intelligent_web_crawl: 0.2127
INFO:tools.core.tool_selector:  monitor_website_changes: 0.1991
INFO:tools.core.tool_selector:  get_web_tools_status: 0.2086
INFO:tools.core.tool_selector:  plan_autonomous_task: 0.0669
INFO:tools.core.tool_selector:  get_autonomous_status: 0.0451
INFO:tools.core.tool_selector:Sorted tools by similarity: [('automate_web_login', 0.3365977865176092), ('forget', 0.24568189551210043), ('check_security_status', 0.2454584967767336), ('request_authorization', 0.22863673441607976), ('intelligent_web_crawl', 0.21269928455103684), ('get_web_tools_status', 0.20864588468032863), ('automate_web_search', 0.20624518828482793), ('remember', 0.2031731046015462), ('search_memories', 0.2007694603027623), ('monitor_website_changes', 0.19908351640303074), ('intelligent_web_search', 0.1971424101426629), ('approve_authorization', 0.1928584810116353), ('get_authorization_requests', 0.1805133126415768), ('format_response', 0.1759336281980695), ('get_audit_log', 0.16333494055275982), ('get_monitoring_metrics', 0.1615024632404788), ('automate_file_download', 0.16074548015021703), ('ask_human', 0.15941408619606617), ('start_checkout', 0.1548015171889684), ('get_user_info', 0.15060439579680257), ('generate_image', 0.1457034156970927), ('image_to_image', 0.14233806004952676), ('get_weather', 0.13993218830819906), ('save_shipping_address', 0.13711237428550088), ('generate_image_to_file', 0.13462360149732938), ('get_event_sourcing_status', 0.13403250883766268), ('process_payment', 0.12916040633573556), ('search_image_generations', 0.12899183237634546), ('view_cart', 0.1281480265789872), ('delete_background_task', 0.11806387046255157), ('create_background_task', 0.10784000756431698), ('pause_background_task', 0.101745082843969), ('get_product_details', 0.09635586826322368), ('list_background_tasks', 0.09124399680951881), ('update_memory', 0.08824847143897903), ('search_products', 0.08194201718734592), ('add_to_cart', 0.0741787080653919), ('plan_autonomous_task', 0.06693386831691474), ('resume_background_task', 0.05813988464102707), ('get_autonomous_status', 0.045133946603385405)]
INFO:tools.core.tool_selector:  Selected automate_web_login (score: 0.3366 >= 0.25)
INFO:tools.core.tool_selector:  Skipped forget (score: 0.2457 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped check_security_status (score: 0.2455 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped request_authorization (score: 0.2286 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped intelligent_web_crawl (score: 0.2127 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_web_tools_status (score: 0.2086 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped automate_web_search (score: 0.2062 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped remember (score: 0.2032 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_memories (score: 0.2008 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped monitor_website_changes (score: 0.1991 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped intelligent_web_search (score: 0.1971 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped approve_authorization (score: 0.1929 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_authorization_requests (score: 0.1805 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped format_response (score: 0.1759 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_audit_log (score: 0.1633 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_monitoring_metrics (score: 0.1615 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped automate_file_download (score: 0.1607 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped ask_human (score: 0.1594 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped start_checkout (score: 0.1548 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_user_info (score: 0.1506 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped generate_image (score: 0.1457 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped image_to_image (score: 0.1423 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_weather (score: 0.1399 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped save_shipping_address (score: 0.1371 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped generate_image_to_file (score: 0.1346 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_event_sourcing_status (score: 0.1340 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped process_payment (score: 0.1292 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_image_generations (score: 0.1290 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped view_cart (score: 0.1281 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped delete_background_task (score: 0.1181 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped create_background_task (score: 0.1078 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped pause_background_task (score: 0.1017 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_product_details (score: 0.0964 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped list_background_tasks (score: 0.0912 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped update_memory (score: 0.0882 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_products (score: 0.0819 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped add_to_cart (score: 0.0742 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped plan_autonomous_task (score: 0.0669 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped resume_background_task (score: 0.0581 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_autonomous_status (score: 0.0451 < 0.25 or max reached)
INFO:tools.core.tool_selector:Final selection: ['automate_web_login']
INFO:prompts.prompt_selector:Prompt selector: analyzing request 'Login to https://the-internet.herokuapp.com/login using username tomsmith password SuperSecretPassword\!'
INFO:prompts.prompt_selector:Embed service ready: True
INFO:prompts.prompt_selector:Embeddings cache ready: True
INFO:prompts.prompt_selector:Max prompts: 3, Threshold: 0.25
INFO:prompts.prompt_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:prompts.prompt_selector:User embedding computed, length: 1536
INFO:prompts.prompt_selector:Computing similarities with 10 prompts...
INFO:prompts.prompt_selector:  security_analysis_prompt: 0.1808
INFO:prompts.prompt_selector:  memory_organization_prompt: 0.0926
INFO:prompts.prompt_selector:  monitoring_report_prompt: 0.1493
INFO:prompts.prompt_selector:  user_assistance_prompt: 0.2149
INFO:prompts.prompt_selector:  personal_stylist_prompt: 0.1519
INFO:prompts.prompt_selector:  product_comparison_prompt: 0.0715
INFO:prompts.prompt_selector:  outfit_coordination_prompt: 0.0995
INFO:prompts.prompt_selector:  shopping_assistant_prompt: 0.1620
INFO:prompts.prompt_selector:  trend_analysis_prompt: 0.0703
INFO:prompts.prompt_selector:  size_fit_consultant_prompt: 0.0370
INFO:prompts.prompt_selector:Sorted prompts by similarity: [('user_assistance_prompt', 0.21487971253858434), ('security_analysis_prompt', 0.18078416178517775), ('shopping_assistant_prompt', 0.1619624194170573), ('personal_stylist_prompt', 0.15185837444856884), ('monitoring_report_prompt', 0.14927839323249437), ('outfit_coordination_prompt', 0.09945588908011914), ('memory_organization_prompt', 0.09261721762140465), ('product_comparison_prompt', 0.07150463442477695), ('trend_analysis_prompt', 0.07027305802410508), ('size_fit_consultant_prompt', 0.037044074330208454)]
INFO:prompts.prompt_selector:  Skipped user_assistance_prompt (score: 0.2149 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped security_analysis_prompt (score: 0.1808 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped shopping_assistant_prompt (score: 0.1620 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped personal_stylist_prompt (score: 0.1519 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped monitoring_report_prompt (score: 0.1493 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped outfit_coordination_prompt (score: 0.0995 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped memory_organization_prompt (score: 0.0926 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped product_comparison_prompt (score: 0.0715 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped trend_analysis_prompt (score: 0.0703 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped size_fit_consultant_prompt (score: 0.0370 < 0.25 or max reached)
INFO:prompts.prompt_selector:No prompts above threshold, selecting best: user_assistance_prompt (score: 0.2149)
INFO:prompts.prompt_selector:Final prompt selection: ['user_assistance_prompt']
INFO:resources.resource_selector:Resource selector: analyzing request 'Login to https://the-internet.herokuapp.com/login using username tomsmith password SuperSecretPassword\!'
INFO:resources.resource_selector:Embed service ready: True
INFO:resources.resource_selector:Embeddings cache ready: True
INFO:resources.resource_selector:Max resources: 3, Threshold: 0.25
INFO:resources.resource_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:resources.resource_selector:User embedding computed, length: 1536
INFO:resources.resource_selector:Computing similarities with 17 resources...
INFO:resources.resource_selector:  memory://all: 0.0775
INFO:resources.resource_selector:  memory://category/{category}: 0.0686
INFO:resources.resource_selector:  weather://cache: 0.1257
INFO:resources.resource_selector:  event://tasks: 0.0874
INFO:resources.resource_selector:  event://status: 0.1301
INFO:resources.resource_selector:  event://tasks/active: 0.0993
INFO:resources.resource_selector:  event://tasks/by-type/{task_type}: 0.0510
INFO:resources.resource_selector:  event://config/examples: 0.1384
INFO:resources.resource_selector:  monitoring://metrics: 0.1294
INFO:resources.resource_selector:  monitoring://health: 0.1478
INFO:resources.resource_selector:  monitoring://audit: 0.1774
INFO:resources.resource_selector:  shopify://catalog/collections: 0.0870
INFO:resources.resource_selector:  shopify://knowledge/fashion_guide: 0.1479
INFO:resources.resource_selector:  shopify://preferences/user_profiles: 0.1751
INFO:resources.resource_selector:  shopify://analytics/shopping_trends: 0.1063
INFO:resources.resource_selector:  shopify://cache/product_recommendations: 0.1253
INFO:resources.resource_selector:  shopify://inventory/stock_alerts: 0.1121
INFO:resources.resource_selector:Sorted resources by similarity: [('monitoring://audit', 0.17743308515118167), ('shopify://preferences/user_profiles', 0.17508050734135458), ('shopify://knowledge/fashion_guide', 0.14789862267891785), ('monitoring://health', 0.14775411216138193), ('event://config/examples', 0.1384180963252872), ('event://status', 0.1301114013387504), ('monitoring://metrics', 0.12939800276594726), ('weather://cache', 0.1256963543249797), ('shopify://cache/product_recommendations', 0.1252782394041645), ('shopify://inventory/stock_alerts', 0.11212437092387716), ('shopify://analytics/shopping_trends', 0.10633977897673812), ('event://tasks/active', 0.09931578789480015), ('event://tasks', 0.08736541552966494), ('shopify://catalog/collections', 0.08698356484057462), ('memory://all', 0.07745726052181026), ('memory://category/{category}', 0.06864288606670273), ('event://tasks/by-type/{task_type}', 0.05096240664754887)]
INFO:resources.resource_selector:  Skipped monitoring://audit (score: 0.1774 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://preferences/user_profiles (score: 0.1751 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://knowledge/fashion_guide (score: 0.1479 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped monitoring://health (score: 0.1478 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://config/examples (score: 0.1384 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://status (score: 0.1301 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped monitoring://metrics (score: 0.1294 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped weather://cache (score: 0.1257 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://cache/product_recommendations (score: 0.1253 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://inventory/stock_alerts (score: 0.1121 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://analytics/shopping_trends (score: 0.1063 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks/active (score: 0.0993 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks (score: 0.0874 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://catalog/collections (score: 0.0870 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped memory://all (score: 0.0775 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped memory://category/{category} (score: 0.0686 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks/by-type/{task_type} (score: 0.0510 < 0.25 or max reached)
INFO:resources.resource_selector:No resources above threshold, selecting best: monitoring://audit (score: 0.1774)
INFO:resources.resource_selector:Final resource selection: ['monitoring://audit']
🧠 Smart MCP Server
==================================================
🎯 Features:
   • AI-powered capability discovery
   • Vector similarity matching
   • Dynamic tool selection
   • Smart prompt routing
   • Intelligent resource discovery
   • Security and monitoring integration

🚀 Initializing Smart MCP Server...
🔧 Initializing core services...
  ✅ Security manager initialized
  ✅ Database initialized
✅ Core services ready
📦 Auto-discovering and registering capabilities...
🤖 Autonomous planning tools registered successfully
✅ All capabilities auto-registered
🧠 Initializing AI selectors...
🤖 Autonomous planning tools registered successfully
  ✅ Tool selector ready
  ✅ Prompt selector ready
  ✅ Resource selector ready
✅ AI selectors initialized
✅ Smart MCP Server initialized successfully
🌐 Server: Smart MCP Server
🧠 AI Selectors: 3/3 active
📦 Capabilities: 41 modules

🎯 MCP endpoint: http://0.0.0.0:4321/mcp/
🎯 API endpoints:
   • /health - Health check and server info
   • /discover (POST) - AI-powered capability discovery
   • /stats - AI selector statistics
   • /capabilities - List all available capabilities

🎯 Discovering capabilities for: 'Login to https://the-internet.herokuapp.com/login using username tomsmith password SuperSecretPassword\!'
  🔧 Tools: ['automate_web_login']
  📝 Prompts: ['user_assistance_prompt']
  📊 Resources: ['monitoring://audit']
✅ Capability discovery completed
INFO:     127.0.0.1:60643 - "POST /discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:60651 - "POST /mcp/ HTTP/1.1" 200 OK
INFO:mcp.server.lowlevel.server:Processing request of type ListToolsRequest
INFO:     127.0.0.1:60651 - "POST /mcp/ HTTP/1.1" 200 OK
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:tools.services.web_services.core.browser_manager:Playwright initialized
INFO:web_tools:Web services initialized
INFO:tools.services.web_services.core.browser_manager:Playwright initialized
INFO:tools.services.web_services.core.browser_manager:Browser created for profile: stealth
INFO:tools.services.web_services.core.browser_manager:Context created: stealth_login_default_-809323790979946024
INFO:tools.services.web_services.core.browser_manager:Page created: stealth_default
INFO:tools.services.web_services.core.session_manager:Session created: login_default_-809323790979946024 with profile stealth
INFO:tools.services.web_services.core.vision_analyzer:Starting login form identification
INFO:tools.services.web_services.core.vision_analyzer:Screenshot taken: 53909 bytes
INFO:tools.services.web_services.core.vision_analyzer:Trying traditional element detection...
INFO:tools.services.web_services.core.vision_analyzer:Traditional detection result: {'username': 'input[name="username"]', 'password': 'input[type="password"]', 'submit': 'button[type="submit"]'}
INFO:tools.services.web_services.core.vision_analyzer:Successfully identified login elements: {'username': 'input[name="username"]', 'password': 'input[type="password"]', 'submit': 'button[type="submit"]'}
INFO:web_tools:Web login automation completed for https://the-internet.herokuapp.com/login
INFO:tools.core.tool_selector:Tool selector: analyzing request 'hi'
INFO:tools.core.tool_selector:Embed service ready: True
INFO:tools.core.tool_selector:Embeddings cache ready: True
INFO:tools.core.tool_selector:Max tools: 5, Threshold: 0.25
INFO:tools.core.tool_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:tools.core.tool_selector:User embedding computed, length: 1536
INFO:tools.core.tool_selector:Computing similarities with 40 tools...
INFO:tools.core.tool_selector:  get_weather: 0.1958
INFO:tools.core.tool_selector:  remember: 0.2002
INFO:tools.core.tool_selector:  forget: 0.2005
INFO:tools.core.tool_selector:  update_memory: 0.2074
INFO:tools.core.tool_selector:  search_memories: 0.2000
INFO:tools.core.tool_selector:  generate_image: 0.1573
INFO:tools.core.tool_selector:  generate_image_to_file: 0.1254
INFO:tools.core.tool_selector:  image_to_image: 0.2137
INFO:tools.core.tool_selector:  search_image_generations: 0.2153
INFO:tools.core.tool_selector:  search_products: 0.1129
INFO:tools.core.tool_selector:  get_product_details: 0.1229
INFO:tools.core.tool_selector:  add_to_cart: 0.0736
INFO:tools.core.tool_selector:  view_cart: 0.1196
INFO:tools.core.tool_selector:  get_user_info: 0.1847
INFO:tools.core.tool_selector:  save_shipping_address: 0.1489
INFO:tools.core.tool_selector:  start_checkout: 0.1507
INFO:tools.core.tool_selector:  process_payment: 0.1439
INFO:tools.core.tool_selector:  get_authorization_requests: 0.1811
INFO:tools.core.tool_selector:  approve_authorization: 0.2056
INFO:tools.core.tool_selector:  get_monitoring_metrics: 0.1882
INFO:tools.core.tool_selector:  get_audit_log: 0.1816
INFO:tools.core.tool_selector:  ask_human: 0.3011
INFO:tools.core.tool_selector:  request_authorization: 0.2519
INFO:tools.core.tool_selector:  check_security_status: 0.2076
INFO:tools.core.tool_selector:  format_response: 0.1968
INFO:tools.core.tool_selector:  create_background_task: 0.0980
INFO:tools.core.tool_selector:  list_background_tasks: 0.1634
INFO:tools.core.tool_selector:  pause_background_task: 0.1996
INFO:tools.core.tool_selector:  resume_background_task: 0.1927
INFO:tools.core.tool_selector:  delete_background_task: 0.1607
INFO:tools.core.tool_selector:  get_event_sourcing_status: 0.2263
INFO:tools.core.tool_selector:  automate_web_login: 0.2391
INFO:tools.core.tool_selector:  automate_web_search: 0.2388
INFO:tools.core.tool_selector:  automate_file_download: 0.1992
INFO:tools.core.tool_selector:  intelligent_web_search: 0.2095
INFO:tools.core.tool_selector:  intelligent_web_crawl: 0.2371
INFO:tools.core.tool_selector:  monitor_website_changes: 0.2651
INFO:tools.core.tool_selector:  get_web_tools_status: 0.2189
INFO:tools.core.tool_selector:  plan_autonomous_task: 0.0948
INFO:tools.core.tool_selector:  get_autonomous_status: 0.1181
INFO:tools.core.tool_selector:Sorted tools by similarity: [('ask_human', 0.3011458805719598), ('monitor_website_changes', 0.2651075972467674), ('request_authorization', 0.2519247897411913), ('automate_web_login', 0.239124165589056), ('automate_web_search', 0.23877395342161828), ('intelligent_web_crawl', 0.237100586610486), ('get_event_sourcing_status', 0.22626174517367437), ('get_web_tools_status', 0.21887167416302905), ('search_image_generations', 0.21528250120486328), ('image_to_image', 0.21370722729376707), ('intelligent_web_search', 0.20948307496125354), ('check_security_status', 0.2076412636538861), ('update_memory', 0.20744417610560528), ('approve_authorization', 0.20562355887226552), ('forget', 0.2005072119917491), ('remember', 0.2002233441326446), ('search_memories', 0.20001479132266503), ('pause_background_task', 0.19955179646588558), ('automate_file_download', 0.19920252257149482), ('format_response', 0.19678356665752006), ('get_weather', 0.19582546221209335), ('resume_background_task', 0.19274139389942063), ('get_monitoring_metrics', 0.1882298859820505), ('get_user_info', 0.18465577186925547), ('get_audit_log', 0.18157358671748608), ('get_authorization_requests', 0.18112259072316422), ('list_background_tasks', 0.16342732184299194), ('delete_background_task', 0.16067633040572565), ('generate_image', 0.15728564228047834), ('start_checkout', 0.15067079316862625), ('save_shipping_address', 0.14891219060744798), ('process_payment', 0.1438752497934136), ('generate_image_to_file', 0.12537306752719318), ('get_product_details', 0.1229335020502512), ('view_cart', 0.11964120933350716), ('get_autonomous_status', 0.11807101453984852), ('search_products', 0.11290254071189114), ('create_background_task', 0.09800389633182906), ('plan_autonomous_task', 0.09478163521631346), ('add_to_cart', 0.07356383644039691)]
INFO:tools.core.tool_selector:  Selected ask_human (score: 0.3011 >= 0.25)
INFO:tools.core.tool_selector:  Selected monitor_website_changes (score: 0.2651 >= 0.25)
INFO:tools.core.tool_selector:  Selected request_authorization (score: 0.2519 >= 0.25)
INFO:tools.core.tool_selector:  Skipped automate_web_login (score: 0.2391 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped automate_web_search (score: 0.2388 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped intelligent_web_crawl (score: 0.2371 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_event_sourcing_status (score: 0.2263 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_web_tools_status (score: 0.2189 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_image_generations (score: 0.2153 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped image_to_image (score: 0.2137 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped intelligent_web_search (score: 0.2095 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped check_security_status (score: 0.2076 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped update_memory (score: 0.2074 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped approve_authorization (score: 0.2056 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped forget (score: 0.2005 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped remember (score: 0.2002 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_memories (score: 0.2000 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped pause_background_task (score: 0.1996 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped automate_file_download (score: 0.1992 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped format_response (score: 0.1968 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_weather (score: 0.1958 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped resume_background_task (score: 0.1927 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_monitoring_metrics (score: 0.1882 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_user_info (score: 0.1847 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_audit_log (score: 0.1816 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_authorization_requests (score: 0.1811 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped list_background_tasks (score: 0.1634 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped delete_background_task (score: 0.1607 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped generate_image (score: 0.1573 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped start_checkout (score: 0.1507 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped save_shipping_address (score: 0.1489 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped process_payment (score: 0.1439 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped generate_image_to_file (score: 0.1254 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_product_details (score: 0.1229 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped view_cart (score: 0.1196 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped get_autonomous_status (score: 0.1181 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped search_products (score: 0.1129 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped create_background_task (score: 0.0980 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped plan_autonomous_task (score: 0.0948 < 0.25 or max reached)
INFO:tools.core.tool_selector:  Skipped add_to_cart (score: 0.0736 < 0.25 or max reached)
INFO:tools.core.tool_selector:Final selection: ['ask_human', 'monitor_website_changes', 'request_authorization']
INFO:prompts.prompt_selector:Prompt selector: analyzing request 'hi'
INFO:prompts.prompt_selector:Embed service ready: True
INFO:prompts.prompt_selector:Embeddings cache ready: True
INFO:prompts.prompt_selector:Max prompts: 3, Threshold: 0.25
INFO:prompts.prompt_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:prompts.prompt_selector:User embedding computed, length: 1536
INFO:prompts.prompt_selector:Computing similarities with 10 prompts...
INFO:prompts.prompt_selector:  security_analysis_prompt: 0.1720
INFO:prompts.prompt_selector:  memory_organization_prompt: 0.1686
INFO:prompts.prompt_selector:  monitoring_report_prompt: 0.1987
INFO:prompts.prompt_selector:  user_assistance_prompt: 0.2258
INFO:prompts.prompt_selector:  personal_stylist_prompt: 0.1830
INFO:prompts.prompt_selector:  product_comparison_prompt: 0.2042
INFO:prompts.prompt_selector:  outfit_coordination_prompt: 0.1658
INFO:prompts.prompt_selector:  shopping_assistant_prompt: 0.2131
INFO:prompts.prompt_selector:  trend_analysis_prompt: 0.1724
INFO:prompts.prompt_selector:  size_fit_consultant_prompt: 0.1431
INFO:prompts.prompt_selector:Sorted prompts by similarity: [('user_assistance_prompt', 0.2258373920639256), ('shopping_assistant_prompt', 0.21305025406459888), ('product_comparison_prompt', 0.20415617775632544), ('monitoring_report_prompt', 0.19865740704162801), ('personal_stylist_prompt', 0.18304915410147343), ('trend_analysis_prompt', 0.17236159311529808), ('security_analysis_prompt', 0.17198337388670135), ('memory_organization_prompt', 0.16861971942070947), ('outfit_coordination_prompt', 0.1657577404997178), ('size_fit_consultant_prompt', 0.14311430893915275)]
INFO:prompts.prompt_selector:  Skipped user_assistance_prompt (score: 0.2258 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped shopping_assistant_prompt (score: 0.2131 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped product_comparison_prompt (score: 0.2042 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped monitoring_report_prompt (score: 0.1987 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped personal_stylist_prompt (score: 0.1830 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped trend_analysis_prompt (score: 0.1724 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped security_analysis_prompt (score: 0.1720 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped memory_organization_prompt (score: 0.1686 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped outfit_coordination_prompt (score: 0.1658 < 0.25 or max reached)
INFO:prompts.prompt_selector:  Skipped size_fit_consultant_prompt (score: 0.1431 < 0.25 or max reached)
INFO:prompts.prompt_selector:No prompts above threshold, selecting best: user_assistance_prompt (score: 0.2258)
INFO:prompts.prompt_selector:Final prompt selection: ['user_assistance_prompt']
INFO:resources.resource_selector:Resource selector: analyzing request 'hi'
INFO:resources.resource_selector:Embed service ready: True
INFO:resources.resource_selector:Embeddings cache ready: True
INFO:resources.resource_selector:Max resources: 3, Threshold: 0.25
INFO:resources.resource_selector:Computing user request embedding...
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:isa_model.inference.billing_tracker:Tracked usage: openai/text-embedding-3-small - $0.000000
INFO:resources.resource_selector:User embedding computed, length: 1536
INFO:resources.resource_selector:Computing similarities with 17 resources...
INFO:resources.resource_selector:  memory://all: 0.1732
INFO:resources.resource_selector:  memory://category/{category}: 0.1919
INFO:resources.resource_selector:  weather://cache: 0.1356
INFO:resources.resource_selector:  event://tasks: 0.1414
INFO:resources.resource_selector:  event://status: 0.2135
INFO:resources.resource_selector:  event://tasks/active: 0.1622
INFO:resources.resource_selector:  event://tasks/by-type/{task_type}: 0.1306
INFO:resources.resource_selector:  event://config/examples: 0.1917
INFO:resources.resource_selector:  monitoring://metrics: 0.1622
INFO:resources.resource_selector:  monitoring://health: 0.2324
INFO:resources.resource_selector:  monitoring://audit: 0.1680
INFO:resources.resource_selector:  shopify://catalog/collections: 0.1216
INFO:resources.resource_selector:  shopify://knowledge/fashion_guide: 0.1557
INFO:resources.resource_selector:  shopify://preferences/user_profiles: 0.1858
INFO:resources.resource_selector:  shopify://analytics/shopping_trends: 0.1266
INFO:resources.resource_selector:  shopify://cache/product_recommendations: 0.1279
INFO:resources.resource_selector:  shopify://inventory/stock_alerts: 0.1386
INFO:resources.resource_selector:Sorted resources by similarity: [('monitoring://health', 0.23236372838932487), ('event://status', 0.21349582047522453), ('memory://category/{category}', 0.1918605149149049), ('event://config/examples', 0.19169137507326187), ('shopify://preferences/user_profiles', 0.18578115441467966), ('memory://all', 0.17320124785861404), ('monitoring://audit', 0.1679897096296141), ('event://tasks/active', 0.16221670930734713), ('monitoring://metrics', 0.16215743620148718), ('shopify://knowledge/fashion_guide', 0.1556952672521142), ('event://tasks', 0.14138029773229907), ('shopify://inventory/stock_alerts', 0.13856139512270765), ('weather://cache', 0.13563832960830674), ('event://tasks/by-type/{task_type}', 0.1305641315155306), ('shopify://cache/product_recommendations', 0.12789917008348883), ('shopify://analytics/shopping_trends', 0.1266301736580903), ('shopify://catalog/collections', 0.12163264857483592)]
INFO:resources.resource_selector:  Skipped monitoring://health (score: 0.2324 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://status (score: 0.2135 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped memory://category/{category} (score: 0.1919 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://config/examples (score: 0.1917 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://preferences/user_profiles (score: 0.1858 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped memory://all (score: 0.1732 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped monitoring://audit (score: 0.1680 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks/active (score: 0.1622 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped monitoring://metrics (score: 0.1622 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://knowledge/fashion_guide (score: 0.1557 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks (score: 0.1414 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://inventory/stock_alerts (score: 0.1386 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped weather://cache (score: 0.1356 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped event://tasks/by-type/{task_type} (score: 0.1306 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://cache/product_recommendations (score: 0.1279 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://analytics/shopping_trends (score: 0.1266 < 0.25 or max reached)
INFO:resources.resource_selector:  Skipped shopify://catalog/collections (score: 0.1216 < 0.25 or max reached)
INFO:resources.resource_selector:No resources above threshold, selecting best: monitoring://health (score: 0.2324)
INFO:resources.resource_selector:Final resource selection: ['monitoring://health']
🔧 Initializing web services...
✅ BrowserManager created
✅ SessionManager created
✅ StealthManager created
✅ VisionAnalyzer created
✅ RateLimiter created
✅ ProxyManager created
✅ HumanBehavior created
🔧 Initializing browser manager...
✅ Web services fully initialized
🔍 DEBUG: After init - _vision_analyzer: <tools.services.web_services.core.vision_analyzer.VisionAnalyzer object at 0x10a4c6390>
🔍 DEBUG: After init - _session_manager: <tools.services.web_services.core.session_manager.SessionManager object at 0x10a4c5790>
🔍 DEBUG: After init - _human_behavior: <tools.services.web_services.utils.human_behavior.HumanBehavior object at 0x10a4c79d0>
🔍 DEBUG: Session manager status: True
🔍 DEBUG: Vision analyzer status: True
🔍 DEBUG: Human behavior status: True
🎯 Discovering capabilities for: 'hi'
  🔧 Tools: ['ask_human', 'monitor_website_changes', 'request_authorization']
  📝 Prompts: ['user_assistance_prompt']
  📊 Resources: ['monitoring://health']
✅ Capability discovery completed
INFO:     127.0.0.1:61018 - "POST /discover HTTP/1.1" 200 OK
INFO:     127.0.0.1:61025 - "POST /mcp/ HTTP/1.1" 200 OK
INFO:mcp.server.lowlevel.server:Processing request of type ListToolsRequest
